@using StpFoodBlazor.Components.Layout
@using StpFoodBlazor.Models
@using AngleSharp.Html.Dom
@using AngleSharp.Dom

@code {
    private TestContext ctx;

    void OnSelectedDayChanged(ChangeEventArgs e){}

    void OnHappyHourChanged(ChangeEventArgs e){}

    void OnAlcoholChanged(ChangeEventArgs e){}

    public DealFilterBarTest()
    {
        ctx = new TestContext();
    }

    [Fact]
    public void ShouldRenderCompents()
    {
        var cut = ctx.Render(@<DealFilterBar selectedDayOfWeek="Tuesday"
          OnSelectedDayChanged="OnSelectedDayChanged"
          OnHappyHourChanged="OnHappyHourChanged"
          OnAlcoholChanged="OnAlcoholChanged"
          happyHour=false
          alcohol=false />);

        cut.Find("#filter-bar");
        cut.Find("#day-of-week-select");
        cut.Find("#happy-hour-checkbox");
        cut.Find("#alcohol-checkbox");
    }

    [Fact]
    public void ShouldRenderDayOfWeek()
    {
        var cut = ctx.Render(@<DealFilterBar selectedDayOfWeek="Tuesday"
          OnSelectedDayChanged="OnSelectedDayChanged"
          OnHappyHourChanged="OnHappyHourChanged"
          OnAlcoholChanged="OnAlcoholChanged"
          happyHour=false
          alcohol=false />);

        var dow = cut.Find("#day-of-week-select");
        Assert.Equal("Tuesday", dow.GetAttribute("value"));
    }

    [Fact]
    public void ShouldRenderHappyHour()
    {
        var cut = ctx.Render(@<DealFilterBar selectedDayOfWeek="Tuesday"
          OnSelectedDayChanged="OnSelectedDayChanged"
          OnHappyHourChanged="OnHappyHourChanged"
          OnAlcoholChanged="OnAlcoholChanged"
          happyHour=true
          alcohol=false />);

        var hh = cut.Find("#happy-hour-checkbox");
        Assert.True(((IHtmlInputElement)hh).IsChecked);
    }

    [Fact]
    public void ShouldRenderAlcohol()
    {
        var cut = ctx.Render(@<DealFilterBar selectedDayOfWeek="Tuesday"
          OnSelectedDayChanged="OnSelectedDayChanged"
          OnHappyHourChanged="OnHappyHourChanged"
          OnAlcoholChanged="OnAlcoholChanged"
          happyHour=false
          alcohol=true />);

        var hh = cut.Find("#alcohol-checkbox");
        Assert.True(((IHtmlInputElement)hh).IsChecked);

    }
}
